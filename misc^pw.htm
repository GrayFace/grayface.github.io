-[
SetTitle("Perfect World", "Perfect World `- `en|Grading calculator|`ru|Калькулятор заточки|")
SetDescription"`en|Grading calculator for|`ru|Калькулятор заточки для| Perfect World."
]

	<script type="text/javascript">
/*! sprintf-js | Alexandru Marasteanu <hello@alexei.ro> (http://alexei.ro/) | BSD-3-Clause */

!function(a){function b(){var a=arguments[0],c=b.cache;return c[a]&&c.hasOwnProperty(a)||(c[a]=b.parse(a)),b.format.call(null,c[a],arguments)}function c(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function d(a,b){return Array(b+1).join(a)}var e={not_string:/[^s]/,number:/[def]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};b.format=function(a,f){var g,h,i,j,k,l,m,n=1,o=a.length,p="",q=[],r=!0,s="";for(h=0;o>h;h++)if(p=c(a[h]),"string"===p)q[q.length]=a[h];else if("array"===p){if(j=a[h],j[2])for(g=f[n],i=0;i<j[2].length;i++){if(!g.hasOwnProperty(j[2][i]))throw new Error(b("[sprintf] property '%s' does not exist",j[2][i]));g=g[j[2][i]]}else g=j[1]?f[j[1]]:f[n++];if("function"==c(g)&&(g=g()),e.not_string.test(j[8])&&"number"!=c(g)&&isNaN(g))throw new TypeError(b("[sprintf] expecting number but found %s",c(g)));switch(e.number.test(j[8])&&(r=g>=0),j[8]){case"b":g=g.toString(2);break;case"c":g=String.fromCharCode(g);break;case"d":g=parseInt(g,10);break;case"e":g=j[7]?g.toExponential(j[7]):g.toExponential();break;case"f":g=j[7]?parseFloat(g).toFixed(j[7]):parseFloat(g);break;case"o":g=g.toString(8);break;case"s":g=(g=String(g))&&j[7]?g.substring(0,j[7]):g;break;case"u":g>>>=0;break;case"x":g=g.toString(16);break;case"X":g=g.toString(16).toUpperCase()}(!r||e.number.test(j[8])&&j[3])&&(s=r?"+":"-",g=g.toString().replace(e.sign,"")),l=j[4]?"0"==j[4]?"0":j[4].charAt(1):" ",m=j[6]-(s+g).length,k=j[6]?d(l,m):"",q[q.length]=j[5]?s+g+k:0==l?s+k+g:k+s+g}return q.join("")},b.cache={},b.parse=function(a){for(var b=a,c=[],d=[],f=0;b;){if(null!==(c=e.text.exec(b)))d[d.length]=c[0];else if(null!==(c=e.modulo.exec(b)))d[d.length]="%";else{if(null===(c=e.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){f|=1;var g=[],h=c[2],i=[];if(null===(i=e.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g[g.length]=i[1];""!==(h=h.substring(i[0].length));)if(null!==(i=e.key_access.exec(h)))g[g.length]=i[1];else{if(null===(i=e.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");g[g.length]=i[1]}c[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var f=function(a,c,d){return d=(c||[]).slice(0),d.splice(0,0,a),b.apply(null,d)};"undefined"!=typeof exports?(exports.sprintf=b,exports.vsprintf=f):(a.sprintf=b,a.vsprintf=f,"function"==typeof define&&define.amd&&define(function(){return{sprintf:b,vsprintf:f}}))}("undefined"==typeof window?this:window);
//# sourceMappingURL=sprintf.min.map
	</script>
	
	<h3>Цены</h3>
	<p>Введите текущие цены камней `- картинки камней кликабельны</p>
	<table>
		<tr>
			<td><a href="https://comeback.pw/cats/136/?show=sell&item_id=11208" target="_blank"><img width="26" height="26" src="https://136.comeback.pw/img/ico_items/5aSp5LmL5piK6ZWcLmRkcw==.jpg" alt="Камень бессмертных" title="Камень бессмертных"/></a></td>
			<td><input type="text" name="" id="ZatoCost1" value="40600" oninput="ZatoUpdate()" /></td>
		</tr>
		<tr>
			<td><a href="https://comeback.pw/cats/136/?show=sell&item_id=12750" target="_blank"><img width="26" height="26" src="http://pw.mail.ru/images/articles/2F2602b27172f4.jpg" alt="Небесный камень" title="Небесный камень"/></td>
			<td><input type="text" name="" id="ZatoCost2" value="260000" oninput="ZatoUpdate()" /></td>
		</tr>
		<tr>
			<td><a href="https://comeback.pw/cats/136/?show=sell&item_id=12751" target="_blank"><img width="26" height="26" src="http://pw.mail.ru/images/articles/2F15368961Xww.jpg" alt="Подземный камень" title="Подземный камень"/></td>
			<td><input type="text" name="" id="ZatoCost3" value="240000" oninput="ZatoUpdate()" /></td>
		</tr>
		<tr>
			<td><a href="https://comeback.pw/cats/136/?show=sell&item_id=12980" target="_blank"><img width="26" height="26" src="http://pw.mail.ru/images/articles/2Ffd4827064977.jpg" alt="Камень мироздания" title="Камень мироздания"/></td>
			<td><input type="text" name="" id="ZatoCost4" value="264000" oninput="ZatoUpdate()" /></td>
		</tr>
		<tr><td colspan="2"><label><input name="" id="ZatoIsWeapon" type="checkbox" onchange="ZatoUpdate()" /><span>Заточка оружия</span></label></td></tr>
	</table>
	<h3>Заточка</h3>
	<table cellpadding="2">
		<thead>
			<tr>
				<th>#</th>
				<th>Использовать</th>
				<th>Цена (вся)</th>
				<th>Цена (на уровень)</th>
				<th>Цена переноса</th>
				<th><img width="26" height="26" src="https://136.comeback.pw/img/ico_items/5aSp5LmL5piK6ZWcLmRkcw==.jpg" alt="Камень бессмертных" title="Камень бессмертных"/> Число</th>
				<th><img width="26" height="26" src="http://pw.mail.ru/images/articles/2F2602b27172f4.jpg" alt="Небесный камень" title="Небесный камень"/> Число</th>
				<th><img width="26" height="26" src="http://pw.mail.ru/images/articles/2F15368961Xww.jpg" alt="Подземный камень" title="Подземный камень"/> Число</th>
				<th><img width="26" height="26" src="http://pw.mail.ru/images/articles/2Ffd4827064977.jpg" alt="Камень мироздания" title="Камень мироздания"/> Число</th>
			</tr>
		</thead>
		<tbody id="ZatoTable" />
	</table>
	<p>* Цены в таблице `- в тысячах юаней</p>
	
	<script type="text/javascript">

var transfer = [1, 5, 12, 28, 60, 80, 100, 150, 250, 400, 650, 1000];

var chances = [
	50, 65, 53.5, 100,
	30, 45, 33.5, 25,
	30, 45, 33.5, 10,
	30, 45, 33.5, 4,
	30, 45, 33.5, 1.67,
	30, 45, 33.5, 0.77,
	30, 45, 33.5, 0.47,
	30, 45, 33.5, 0.25,
	25, 40, 28.5, 0.13,
	20, 35, 23.5, 0.07,
	12, 27, 15.5, 0.04,
	5, 20, 8.5, 0.02
];

var Cost1 = function (p, c, c0) {
	return (c + c0)/p;
}

var Calcs = [
	Cost1, Cost1,
	function(p, c, c0, c1) {
		return c1 + (c + c0 - c1)/p;
	},
	function(p, c, c0) {
		return c/p + c0;
	}
];

var Names = [
	"<img width=\"26\" height=\"26\" src=\"http://www.pwdatabase.com/images/icons/generalm/11208.gif\" alt=\"Камень бессмертных\" title=\"Камень бессмертных\"/>",
	"<img width=\"26\" height=\"26\" src=\"http://pw.mail.ru/images/articles/2F2602b27172f4.jpg\" alt=\"Небесный камень\" title=\"Небесный камень\"/>",
	"<img width=\"26\" height=\"26\" src=\"http://pw.mail.ru/images/articles/2F15368961Xww.jpg\" alt=\"Подземный камень\" title=\"Подземный камень\"/>",
	"<img width=\"26\" height=\"26\" src=\"http://pw.mail.ru/images/articles/2Ffd4827064977.jpg\" alt=\"Камень мироздания\" title=\"Камень мироздания\"/>"
];

var Calc = function(costs, isWeap) {
	var mirCost = costs[0];
	var wmul = (isWeap ? 2 : 1);
	costs[0] = 0;
	var levels = [0, 0];
	var levs = [[0, 0], [0, 0], [0, 0], [0, 0]];
	var s = "";
	for (var i = 1; i <= 12; i++) {
		var best = 1/0;
		var k = 0;
		for (var j = 0; j < 4; j++) {
			var c = Calcs[j](chances[(i-1)*4 + j]/100, costs[j] + mirCost*wmul, levels[i], levels[i-1])
			if (c <= best) {
				best = c;
				k = j;
			}
		}
		levels[i+1] = best;
		for (var j = 0; j < 4; j++) {
			levs[j][i+1] = Calcs[k](chances[(i-1)*4 + k]/100, (k == j || j == 0 ? 1 : 0), levs[j][i], levs[j][i-1]);
		}
		s = s + sprintf("<tr><th>+%s</th> <td>%s</td> <td>%.0f</td> <td>%.0f</td> <td>%.0f<tf> <td>%.0f</td> <td>%.1f</td> <td>%.1f</td> <td>%.1f</td>", i, Names[k], best, best - levels[i], transfer[i-1]*costs[3], levs[0][i+1]*wmul, levs[1][i+1], levs[2][i+1], levs[3][i+1]);
	}
	costs[0] = mirCost;
	/*s = s + "-- Цены --\n";
	for (var j = 0; j < 4; j++) {
		s = s + sprintf("%s: %s\n", Names[j], costs[j])
	}*/
	return s
};

var GE = function(n) {
	return document.getElementById(n);
}

var GV = function(n) {
	return GE("ZatoCost" + n).value/1000;
}

function ZatoUpdate() {
	GE("ZatoTable").innerHTML = Calc([GV(1), GV(2), GV(3), GV(4)], GE("ZatoIsWeapon").checked);
}

ZatoUpdate();

	</script>
<br>
Вероятности взяты <a href="http://perfectworldgamer.wordpress.com/2011/10/18/%D0%B3%D0%B0%D0%B9%D0%B4-%D0%BF%D0%BE-%D0%B7%D0%B0%D1%82%D0%BE%D1%87%D0%BA%D0%B5-perfect-world/" rel="nofollow">отсюда</a>. Если с тех пор какие-то вероятности изменились, напишите мне. До меня сделали <a href="http://covert.clan.su/index/0-25" rel="nofollow">вот такой калькулятор</a>.

<h2>Про перенос заточки</h2>
Следующая информация была актуальна, когда я играл в PW, а это было <b>очень</b> давно. Так что, смотрите сами, изменилось ли что-то с учётом текущих цен.
<br>
Вплоть до +7 для брони и +6 для оружия включительно сама заточка стоит меньше, чем перенос. Поэтому, перенос на таких уровнях крайне убыточен, несмотря на популярность торговли заточенными шмотками на +5, +6 и т.п.<br /><span style="color:rgb(255,0,0)">Важно!</span> Для оружия перенос с брони оказывается выгоднее заточки, начиная с +10. Причём, выгоднее всего заточить броню на +10, перенести заточку на оружие и доточить на +11 и +12 уже пуху. К слову, несколько вещей с заточкой +10 сейчас продаются в котах, причём почти по себестоимости. Это не значит, что нужно точить на +10 только переносом `- вполне разумно будет доточить пуху до +9 и попробовать точнуть на +10, в случае провала заточка слетит до 0 `- тогда уже купить шмотку +10 на перенос.<br />Точка камнями мироздания в среднем дешевле точки шарами дракона, но разница в пределах 8%. Лучше самостоятельно посмотреть, во сколько это обойдётся, но точка +11 и +12 шариками `- тоже вариант, если не хотите возиться.