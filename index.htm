-[SetTitle"`en|News|`ru|Новости|"]
<style>
	h3:not(#toc-header) {
		display: inline-block;
		margin-right: 0.7em;
		margin-bottom: 0.6em;
	}
	.desc span {
		display: inline-block;
		min-width: 0.8em;
		text-align: center;
	}
	span.sp {
		min-width: 0.4em;
	}
	.date {
		margin-top: 0.35em;
		color: gray;
		font-size: 80%;
		padding-left: 2px;
	}
	article {
		margin-top: 1em;
	}
	.files {
		margin-top: 0.5em;
		padding-left: 1px;
	}
	#welcome {
		margin-top: 1.5em;
		font-size: 107%;
	}
	#welcome ~ * {
		margin-left: 10px;
	}
</style>
<div id="welcome">
	`en|Welcome, travelers!|`ru|Добро пожаловать!|<br>
	<br>
	`en|Source code for all new releases can be found on Github|`ru|Исходники всех свежих релизов можно найти на Github'е| <a href="https://github.com/GrayFace/Misc">`en|here|`ru|здесь|</a> `en|or|`ru|или| <a href="https://github.com/GrayFace/MMExtension">`en|here|`ru|здесь|</a>. `en|New releases are easily distinguishable by the red icon of SourceForge mirrors.|`ru|Такие релизы легко отличить по красной иконке зеркала на SourceForge.|<br>
	<br>
	<span class="desc">`en|Below you can find all new releases (newest first).<br> [<span>+</span>] means added feature, [<span>&ndash;</span>] means fixed bug, [<span>*</span>] means other changes.|
	`ru|Ниже идёт список всех новых релизов, отсортированный по дате.<br> [<span>+</span>] означает новую фичу, [<span>&ndash;</span>] означает исправленный баг, [<span>*</span>] означает другое изменение.|</span>
</div>
<div>
-[
package.loaded.dataNews = nil
local releases = require"dataNews"

local month = {"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"}
local monthRU = {"января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"}

function item(t)
	local a = |s| ("`en|%s|`ru|%s|"):format(t[s], t[s.."RU"] or t[s])
	local desc = Escape(a"Desc", 'main')
	desc = desc:gsub("%[([%+%-%*])%] ", '[<span>%1</span>]<span class="sp"> </span>'):gsub("<span>%-</span>", "<span>&ndash;</span>")
	local info = t.FileInfo or {}
	local infoRU = t.FileInfoRU or {}
	local files = t.Files or {}
	local mirrors = t.MirrorSF or {}
	local TitleURL = files[1] and not files[2] and not info[1] or t.TitleURL
	local m,d,y = t.Date:match("(%d+)/(%d+)/(%d+)")
	m = tonumber(m)
	local date = ("`en|%s %s, %s|`ru|%s %s %s|"):format(month[m], d, "20"..y, d, monthRU[m], "20"..y)
]
<article>-[
	if TitleURL then
		]<h3>-[
			CustomLink(files[1], a"Title", mirrors[1])
		]</h3>-[
	else
		]<h3>$[a"Title"]</h3>-[
	end
	]<div class="desc">-[(desc)]</div>-[
	if not TitleURL and files[1] or files[2] then
		]<div class="files">-[
		for i = TitleURL and 2 or 1, #files do
			local url = files[i]
			local fname = url:match("[^?]*"):match(".*/([^/]+)/?$")
			local en = info[i] or "Download "..fname
			local ru = infoRU[i] or "Скачать "..fname
			local desc = ("`en|%s|`ru|%s|"):format(en, ru)
			]<div>-[
				CustomLink(url, desc, mirrors[i])
			]</div>-[
		end
		]</div>-[
	end
	]<div class="date">$[date]</div>
</article>
-[
end

for i = #releases, 1, -1 do
	item(releases[i])
end
]
</div>